- name: Setup tier-1 storage class file
  template:
    src: templates/storage-class-tier1.j2
    dest: ~/storage-class-tier1.yml
    force: yes
    backup: yes

- name: Setup tier-2 storage class file
  template:
    src: templates/storage-class-tier2.j2
    dest: ~/storage-class-tier2.yml
    force: yes
    backup: yes

#- name: create tier-1 class 
#  command: /usr/local/bin/oc create -f ~/storage-class-tier1.yml
#
#- name: create tier-2 class 
#  command: /usr/local/bin/oc create -f ~/storage-class-tier2.yml

- name: Give admin rights
  command: /usr/local/bin/oc adm policy --config=/etc/origin/master/admin.kubeconfig add-cluster-role-to-user cluster-admin admin

- name: Setup secondary network routers
  command: /usr/local/bin/oc adm router router-secondary --replicas=0 --selector='router=secondary' --service-account=router
  when: multinetwork

- name: Setup secondary network router envs
  command: /usr/local/bin/oc set env dc/router-secondary ROUTE_LABELS="router=secondary‚Äù
  when: multinetwork

- name: Scale up secondary network routers
  command: /usr/local/bin/oc scale dc router-secondary --replicas={{ net2_scale }}
  when: multinetwork
